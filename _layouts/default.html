<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page.title }} - {{ site.title }}</title>
    <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
</head>
<body>
    <div class="layout-container">
        <!-- Sidebar -->
        <aside id="sidebar" class="sidebar">
            <!-- Header del Sidebar -->
            <div class="sidebar-header">
                <div class="logo-container">
                    <div class="logo-box">
                        <span class="logo-text">DGL</span>
                    </div>
                    <div class="company-info">
                        <h1 class="company-name">Diesel Global</h1>
                        <h2 class="company-subtitle">Logistics</h2>
                    </div>
                </div>
            </div>

            <!-- Navegaci√≥n -->
            <nav class="sidebar-nav">
                {% for item in site.navigation %}
                <div class="nav-item">
                    {% if item.children %}
                    <!-- Secci√≥n con hijos (desplegable) -->
                    <button class="nav-button has-children" onclick="toggleSection('{{ item.id }}')">
                        <span class="chevron" id="chevron-{{ item.id }}">‚ñ∂</span>
                        <span class="nav-icon">üìÅ</span>
                        <span class="nav-title">{{ item.title }}</span>
                    </button>
                    <div class="nav-children" id="section-{{ item.id }}" style="display: none;">
                        {% for child in item.children %}
                        <a href="{{ child.url | relative_url }}" class="nav-child-link">
                            {{ child.title }}
                        </a>
                        {% endfor %}
                    </div>
                    {% else %}
                    <!-- Secci√≥n simple (sin hijos) -->
                    <a href="{{ item.url | relative_url }}" class="nav-button">
                        <span class="nav-icon">üìÑ</span>
                        <span class="nav-title">{{ item.title }}</span>
                    </a>
                    {% endif %}
                </div>
                {% endfor %}
            </nav>

            <!-- Footer del Sidebar -->
            <div class="sidebar-footer">
                ¬© 2025 Diesel Global Logistics Inc.
            </div>
        </aside>

        <!-- Contenido Principal -->
        <div class="main-wrapper">
            <!-- Header Superior -->
            <header class="main-header">
                <button id="toggleSidebar" class="toggle-button" onclick="toggleSidebar()">
                    <span id="toggleIcon">‚ò∞</span>
                </button>
                <h1 class="header-title">Documentaci√≥n del Proyecto</h1>
            </header>

            <!-- √Årea de Contenido -->
            <main class="main-content">
                <div class="content-card">
                    <h2 class="content-title">{{ page.title }}</h2>
                    
                    {{ content }}
                </div>
            </main>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // Toggle Sidebar
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const toggleIcon = document.getElementById('toggleIcon');
            
            if (sidebar.classList.contains('sidebar-closed')) {
                sidebar.classList.remove('sidebar-closed');
                toggleIcon.textContent = '‚úï';
            } else {
                sidebar.classList.add('sidebar-closed');
                toggleIcon.textContent = '‚ò∞';
            }
        }

        // Toggle Section (Expandir/Colapsar)
        function toggleSection(sectionId) {
            const section = document.getElementById('section-' + sectionId);
            const chevron = document.getElementById('chevron-' + sectionId);
            
            if (section.style.display === 'none' || section.style.display === '') {
                section.style.display = 'block';
                chevron.textContent = '‚ñº';
            } else {
                section.style.display = 'none';
                chevron.textContent = '‚ñ∂';
            }
        }

        // Marcar p√°gina activa
        document.addEventListener('DOMContentLoaded', function() {
            const currentPath = window.location.pathname;
            const links = document.querySelectorAll('.nav-button, .nav-child-link');
            
            links.forEach(link => {
                if (link.getAttribute('href') === currentPath) {
                    link.classList.add('active');
                    
                    // Si es un hijo, expandir su padre
                    const parent = link.closest('.nav-children');
                    if (parent) {
                        parent.style.display = 'block';
                        const parentId = parent.id.replace('section-', '');
                        const chevron = document.getElementById('chevron-' + parentId);
                        if (chevron) chevron.textContent = '‚ñº';
                    }
                }
            });

            // Expandir secciones por defecto
            const defaultExpanded = ['gestion', 'scrum'];
            defaultExpanded.forEach(id => {
                const section = document.getElementById('section-' + id);
                const chevron = document.getElementById('chevron-' + id);
                if (section) {
                    section.style.display = 'block';
                    if (chevron) chevron.textContent = '‚ñº';
                }
            });
        });
    </script>
</body>
</html>